from spectral_film_lut.film_spectral import *


class FujiInstaxColor(FilmSpectral):
    def __init__(self):
        super().__init__()

        self.iso = 1000
        self.density_measure = "status_a"
        self.manufacturer = 'Fujifilm'
        self.stage = 'camera'
        self.type = 'positive'
        self.medium = 'photo'

        # spectral sensitivity
        red_log_sensitivity = {575.3308: -0.1417, 577.1648: -0.0692, 578.6969: 0.0052, 580.2296: 0.0816,
                               582.0660: 0.1630, 583.8989: 0.2315, 585.9299: 0.2870, 588.1794: 0.4047, 590.9248: 0.4927,
                               593.0581: 0.5539, 595.1920: 0.6169, 597.3268: 0.6835, 599.1574: 0.7434, 601.2960: 0.8240,
                               603.4307: 0.8902, 605.5054: 0.9584, 608.0040: 1.0282, 610.4424: 1.0990, 613.4845: 1.1659,
                               617.1328: 1.2383, 621.0829: 1.3082, 625.3357: 1.3791, 629.5867: 1.4436, 634.7457: 1.5106,
                               641.1071: 1.5514, 646.8462: 1.5275, 650.4545: 1.4516, 652.5537: 1.3864, 654.3500: 1.3198,
                               655.8464: 1.2620, 656.7375: 1.2024, 658.3263: 1.1139, 659.5659: 1.0383, 660.3060: 0.9796,
                               661.2941: 0.9060, 662.2787: 0.8195, 662.7799: 0.7346, 663.8413: 0.6341, 664.7300: 0.5655,
                               665.6174: 0.4924, 666.8049: 0.4109, 667.9917: 0.3264, 668.5793: 0.2627, 669.7671: 0.1822,
                               671.8694: 0.0047, 670.9533: 0.0957, 673.0237: -0.0758, 673.9113: -0.1482,
                               675.0967: -0.2377, 676.7349: -0.3302, }
        green_log_sensitivity = {489.1349: -0.1860, 491.5776: -0.0990, 493.7146: -0.0243, 495.5481: 0.0464,
                                 497.9875: 0.1208, 503.7855: 0.3147, 506.2250: 0.3899, 508.3579: 0.4491,
                                 510.7968: 0.5221, 513.8425: 0.6025, 516.8870: 0.6780, 519.9300: 0.7482,
                                 522.9726: 0.8172, 526.0146: 0.8838, 528.4463: 0.9300, 534.8310: 1.0568,
                                 538.7804: 1.1239, 543.6376: 1.1935, 548.7946: 1.2536, 553.3481: 1.3182,
                                 557.6009: 1.3891, 561.8552: 1.4655, 567.3082: 1.5020, 571.8303: 1.4506,
                                 573.5224: 1.3712, 574.5087: 1.2910, 575.6955: 1.2067, 576.8831: 1.1254,
                                 578.0645: 1.0210, 579.3722: 0.9367, 580.4355: 0.8428, 581.6249: 0.7682,
                                 582.2111: 0.6996, 583.3993: 0.6205, 584.5889: 0.5464, 585.1738: 0.4729,
                                 586.3689: 0.4191, 587.9308: 0.2313, 588.9192: 0.1587, 589.6041: 0.0821,
                                 590.4913: 0.0083, 591.6743: -0.0901, 592.8595: -0.1804, 592.8490: -0.2191, }
        blue_log_sensitivity = {383.5885: -0.2189, 384.8196: -0.1395, 385.7495: -0.0555, 387.2976: 0.0780,
                                388.5298: 0.1614, 389.7615: 0.2433, 390.9973: 0.3401, 392.2331: 0.4370,
                                393.4695: 0.5360, 394.7019: 0.6202, 395.7319: 0.7016, 397.1630: 0.7750,
                                401.1419: 0.9517, 407.5272: 1.0805, 413.5916: 1.1411, 420.2500: 1.1621,
                                426.9013: 1.1564, 433.5492: 1.1384, 440.2052: 1.1502, 446.8706: 1.1968,
                                453.5371: 1.2474, 460.1948: 1.2657, 466.8484: 1.2686, 473.5102: 1.3018,
                                480.1585: 1.2852, 484.9779: 1.2151, 487.3757: 1.1359, 489.4717: 1.0593,
                                491.5501: 0.9171, 492.8600: 0.8409, 494.1300: 0.7659, 495.1199: 0.6993,
                                495.7083: 0.6386, 496.6970: 0.5670, 499.2575: 0.3443, 499.2468: 0.3046,
                                502.7747: -0.0683, 503.9623: -0.1496, 505.1499: -0.2308, 506.3381: -0.3099,
                                507.8318: -0.3778, 509.6238: -0.4606, }
        self.log_sensitivity = [red_log_sensitivity, green_log_sensitivity, blue_log_sensitivity]

        # sensiometry
        red_curve = {-3.5841: 2.3137, -3.5161: 2.3135, -3.4481: 2.3120, -3.3801: 2.3080, -3.3121: 2.3012,
                     -3.2472: 2.2963, -3.1762: 2.2833, -3.1020: 2.2700, -3.0341: 2.2531, -2.9662: 2.2330,
                     -2.8984: 2.2076, -2.8306: 2.1702, -2.7660: 2.1176, -2.7077: 2.0514, -2.6586: 1.9886,
                     -2.6158: 1.9197, -2.5791: 1.8515, -2.5487: 1.7830, -2.5183: 1.7038, -2.4879: 1.6266,
                     -2.4604: 1.5647, -2.4331: 1.4910, -2.4058: 1.4147, -2.3815: 1.3484, -2.3571: 1.2859,
                     -2.3298: 1.2167, -2.2994: 1.1401, -2.2689: 1.0762, -2.2353: 1.0069, -2.2017: 0.9399,
                     -2.1682: 0.8726, -2.1315: 0.8067, -2.0918: 0.7362, -2.0489: 0.6642, -2.0061: 0.6013,
                     -1.9570: 0.5344, -1.8956: 0.4675, -1.8280: 0.4051, -1.7603: 0.3521, -1.6926: 0.3081,
                     -1.6248: 0.2715, -1.5570: 0.2426, -1.4891: 0.2241, -1.4211: 0.2119, -1.3531: 0.2090,
                     -1.2851: 0.2085, -1.2171: 0.2056, -1.1491: 0.2038, -1.0811: 0.2022, -1.0130: 0.2045,
                     -0.9450: 0.2049, -0.8770: 0.2052, -0.8120: 0.2069, }
        green_curve = {-3.5839: 2.3438, -3.5159: 2.3436, -3.4541: 2.3435, -3.3799: 2.3377, -3.2872: 2.3302,
                       -3.2192: 2.3251, -3.1533: 2.3166, -3.0802: 2.3011, -2.9969: 2.2722, -2.9291: 2.2389,
                       -2.8614: 2.1919, -2.7937: 2.1441, -2.7292: 2.0754, -2.6740: 2.0100, -2.6280: 1.9421,
                       -2.5913: 1.8769, -2.5609: 1.8111, -2.5304: 1.7400, -2.5031: 1.6655, -2.4757: 1.6001,
                       -2.4452: 1.5260, -2.4179: 1.4573, -2.3936: 1.3921, -2.3693: 1.3198, -2.3450: 1.2572,
                       -2.3176: 1.1896, -2.2871: 1.1190, -2.2567: 1.0491, -2.2262: 0.9870, -2.1875: 0.9078,
                       -2.1529: 0.8434, -2.1132: 0.7716, -2.0734: 0.7043, -2.0275: 0.6353, -1.9816: 0.5668,
                       -1.9325: 0.5072, -1.8710: 0.4433, -1.8034: 0.3851, -1.7357: 0.3362, -1.6680: 0.2941,
                       -1.6002: 0.2600, -1.5323: 0.2343, -1.4644: 0.2194, -1.3964: 0.2099, -1.3284: 0.2089,
                       -1.2604: 0.2076, -1.1924: 0.2058, -1.1243: 0.2053, -1.0563: 0.2052, -0.9883: 0.2052,
                       -0.9203: 0.2048, -0.8646: 0.2046, }
        blue_curve = {-3.5763: 2.0885, -3.4897: 2.0880, -3.4032: 2.0874, -3.3166: 2.0872, -3.2331: 2.0839,
                      -3.1435: 2.0735, -3.0570: 2.0639, -2.9737: 2.0414, -2.8996: 2.0151, -2.8349: 1.9871,
                      -2.7702: 1.9437, -2.6946: 1.8868, -2.6288: 1.8264, -2.5644: 1.7498, -2.5183: 1.6974,
                      -2.4848: 1.6207, -2.4513: 1.5465, -2.4240: 1.4675, -2.3997: 1.3989, -2.3723: 1.3270,
                      -2.3449: 1.2618, -2.3176: 1.1914, -2.2871: 1.1190, -2.2567: 1.0491, -2.2231: 0.9816,
                      -2.1895: 0.9158, -2.1590: 0.8561, -2.1223: 0.7879, -2.0795: 0.7138, -2.0367: 0.6457,
                      -1.9908: 0.5754, -1.9356: 0.5089, -1.8680: 0.4392, -1.8034: 0.3851, -1.7357: 0.3362,
                      -1.6680: 0.2941, -1.6002: 0.2600, -1.5323: 0.2343, -1.4644: 0.2194, -1.3964: 0.2099,
                      -1.3284: 0.2089, -1.2604: 0.2076, -1.1924: 0.2058, -1.1243: 0.2053, -1.0563: 0.2052,
                      -0.9883: 0.2052, -0.9203: 0.2048, -0.8801: 0.2047, }
        red_log_exposure = xp.array(list(red_curve.keys()), dtype=default_dtype)
        red_density_curve = xp.array(list(red_curve.values()), dtype=default_dtype)
        green_log_exposure = xp.array(list(green_curve.keys()), dtype=default_dtype)
        green_density_curve = xp.array(list(green_curve.values()), dtype=default_dtype)
        blue_log_exposure = xp.array(list(blue_curve.keys()), dtype=default_dtype)
        blue_density_curve = xp.array(list(blue_curve.values()), dtype=default_dtype)
        self.log_exposure = [red_log_exposure, green_log_exposure, blue_log_exposure]
        self.density_curve = [red_density_curve, green_density_curve, blue_density_curve]

        # spectral dye density
        red_sd = {483.4608: 0.1789, 490.1715: 0.1813, 496.8822: 0.1854, 503.5929: 0.1936, 510.3036: 0.2051,
                  517.0143: 0.2210, 523.7251: 0.2397, 530.4358: 0.2629, 536.5364: 0.2838, 542.3320: 0.3136,
                  548.4327: 0.3469, 553.9232: 0.3789, 558.8038: 0.4117, 563.6843: 0.4450, 568.0855: 0.4764,
                  571.0389: 0.5052, 575.5805: 0.5361, 578.9359: 0.5697, 582.5963: 0.6084, 594.4925: 0.7190,
                  599.3731: 0.7544, 604.5586: 0.7892, 609.4391: 0.8227, 614.3196: 0.8563, 619.5052: 0.8895,
                  624.9958: 0.9214, 631.0964: 0.9533, 637.8071: 0.9844, 644.5178: 0.9973, 650.3135: 0.9791,
                  654.2789: 0.9463, 657.3292: 0.9099, 660.0745: 0.8736, 662.5147: 0.8380, 664.6500: 0.8011,
                  666.4802: 0.7686, 668.6154: 0.7318, 670.7506: 0.6921, 672.5808: 0.6605, 674.4110: 0.6245,
                  676.2412: 0.5890, 678.0714: 0.5529, 680.5117: 0.5081, 682.6469: 0.4646, 684.1720: 0.5105,
                  684.7821: 0.4320, 686.9173: 0.3991, 689.6626: 0.3631, 692.7129: 0.3275, 695.7633: 0.2967,
                  698.8136: 0.2707, 702.7790: 0.2312, 708.5746: 0.1914, }
        green_sd = {443.8066: 0.3292, 450.5173: 0.3526, 457.2280: 0.3796, 463.6337: 0.4101, 469.4293: 0.4431,
                    473.6998: 0.4719, 478.5803: 0.5055, 484.0709: 0.5469, 488.3413: 0.5837, 492.3067: 0.6200,
                    495.9671: 0.6531, 502.3728: 0.7207, 505.7281: 0.7543, 509.3885: 0.7886, 513.0489: 0.8214,
                    516.4043: 0.8516, 520.0647: 0.8833, 524.3351: 0.9187, 529.5207: 0.9537, 535.9263: 0.9812,
                    542.6371: 0.9978, 549.3478: 0.9979, 556.0585: 0.9791, 561.5491: 0.9464, 565.5145: 0.9146,
                    568.8698: 0.8832, 571.9202: 0.8510, 574.9705: 0.8181, 577.7158: 0.7877, 580.4611: 0.7548,
                    583.2063: 0.7196, 592.0523: 0.5771, 593.8825: 0.5450, 596.6278: 0.5048, 598.4580: 0.4661,
                    600.5932: 0.4249, 605.7787: 0.3491, 608.5240: 0.3160, 611.8794: 0.2823, 615.8448: 0.2504,
                    621.0304: 0.2183, 627.4360: 0.1906, }
        blue_sd = {387.0706: 0.3237, 389.8159: 0.3554, 392.2561: 0.3891, 394.6964: 0.4265, 399.6786: 0.5084,
                   397.1366: 0.4605, 405.3725: 0.6171, 406.8977: 0.6511, 408.4228: 0.6891, 410.2530: 0.7281,
                   412.3883: 0.7725, 414.8285: 0.8106, 417.5738: 0.8462, 420.9292: 0.8786, 425.1996: 0.9139,
                   430.6902: 0.9469, 437.0959: 0.9744, 442.2814: 0.9882, 452.0425: 0.9975, 465.7689: 0.9833,
                   472.4796: 0.9623, 478.2752: 0.9326, 482.8507: 0.8979, 486.8161: 0.8594, 490.1715: 0.8217,
                   492.9168: 0.7877, 495.3570: 0.7555, 497.4923: 0.7276, 501.1527: 0.6579, 503.8980: 0.6208,
                   506.6432: 0.5771, 509.6936: 0.5336, 514.2691: 0.4683, 516.7093: 0.4369, 519.4546: 0.4027,
                   522.5049: 0.3663, 525.5552: 0.3332, 529.2156: 0.2988, 533.8928: 0.2648, 538.9767: 0.2388,
                   545.6874: 0.2146, 552.3981: 0.1963, 557.2786: 0.1848, }

        self.spectral_density = [colour.SpectralDistribution(x) - 0.15 for x in (red_sd, green_sd, blue_sd)]

        self.color_masking = 0.20

        self.calibrate(False)

if __name__ == "__main__":
    FujiInstaxColor()