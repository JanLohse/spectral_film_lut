from spectral_film_lut.film_spectral import *


class Kodak5222(FilmSpectral):
    def __init__(self, dev_time=6, *args, **kwargs):
        super().__init__(*args, **kwargs)

        self.iso = 250
        self.density_measure = 'bw'
        self.exposure_kelvin = 5500
        self.projection_kelvin = None

        # spectral sensitivity
        self.log_sensitivity = [
            {400.4723: 1.9996, 407.7061: 2.0319, 415.8733: 2.0641, 426.6073: 2.0827, 439.7915: 2.0579, 450.2922: 2.0009,
             464.4097: 1.8955, 480.5108: 1.7417, 490.6614: 1.6413, 499.7620: 1.5718, 507.2291: 1.5197, 516.6797: 1.5036,
             525.0803: 1.5185, 535.5809: 1.5582, 549.3485: 1.6127, 561.7159: 1.6524, 573.8501: 1.6760, 584.1174: 1.6549,
             591.2345: 1.6264, 598.7017: 1.5991, 610.0190: 1.5731, 619.1196: 1.5879, 622.3865: 1.5954, 629.8536: 1.5532,
             633.3539: 1.4838, 646.3047: 0.9208, 649.8049: 0.7124, 661.5890: 0.0304, 669.7562: -0.4904}]

        # sensiometry - characteristic curve
        curve = {
            4: {-2.9989: 0.2170, -2.9230: 0.2212, -2.8428: 0.2275, -2.7204: 0.2434, -2.6001: 0.2635, -2.4630: 0.2941,
                -2.3068: 0.3459, -2.1106: 0.4294, -1.7497: 0.5933, -1.2243: 0.8628, -0.8656: 1.0446, -0.6113: 1.1651,
                -0.4003: 1.2602},
            5: {-2.9968: 0.2212, -2.9293: 0.2254, -2.8533: 0.2371, -2.6698: 0.2730, -2.5537: 0.3015, -2.4197: 0.3449,
                -2.2678: 0.4041, -2.0525: 0.5098, -1.7856: 0.6567, -1.4891: 0.8226, -1.2454: 0.9653, -1.0112: 1.1027,
                -0.8255: 1.2042, -0.6293: 1.3046, -0.4647: 1.3818, -0.4014: 1.4093},
            6: {-2.9968: 0.2191, -2.8977: 0.2297, -2.8048: 0.2508, -2.6276: 0.3015, -2.5242: 0.3438, -2.4144: 0.3956,
                -2.2456: 0.4897, -2.1042: 0.5742, -1.8679: 0.7169, -1.6041: 0.8871, -1.2391: 1.1366, -0.9511: 1.3279,
                -0.7200: 1.4727, -0.5090: 1.5953, -0.4024: 1.6587},
            9: {-2.9989: 0.2593, -2.9251: 0.2719, -2.8649: 0.2836, -2.7679: 0.3111, -2.6887: 0.3417, -2.5611: 0.4041,
                -2.4218: 0.4971, -2.2361: 0.6451, -2.0747: 0.7814, -1.9164: 0.9146, -1.7286: 1.0647, -1.5218: 1.2232,
                -1.2792: 1.4093, -1.0724: 1.5636, -0.8877: 1.6978, -0.7052: 1.8173, -0.5501: 1.9135, -0.4024: 1.9980},
            12: {-2.9989: 0.2593, -2.9251: 0.2719, -2.8649: 0.2836, -2.7679: 0.3111, -2.6887: 0.3417, -2.5611: 0.4041,
                 -2.4218: 0.4971, -2.2361: 0.6451, -2.0747: 0.7814, -1.9164: 0.9146, -1.7286: 1.0647, -1.5218: 1.2232,
                 -1.2792: 1.4093, -1.0724: 1.5636, -0.8877: 1.6978, -0.7052: 1.8173, -0.5501: 1.9135, -0.4024: 1.9980}}
        curve = curve[dev_time]
        self.log_exposure = [xp.array(list(curve.keys()), dtype=default_dtype)]
        self.density_curve = [xp.array(list(curve.values()), dtype=default_dtype)]

        self.exposure_base = 10

        self.mtf = [{2.4775: 1.1175, 3.0088: 1.1880, 3.9729: 1.2330, 5.2912: 1.2151, 7.7660: 1.1707, 12.6234: 1.0838,
                     17.6382: 0.9888, 23.0617: 0.8566, 31.0944: 0.6934, 40.6554: 0.5315, 51.6104: 0.3925,
                     63.4554: 0.2961, 77.6361: 0.2198, 100.1441: 0.1545}]

        # curve from kodak 2303
        self.rms_curve = [
            {-0.0046: 0.0624, 0.3563: 0.0684, 0.6135: 0.0805, 0.7653: 0.0865, 0.8861: 0.1147, 1.0194: 0.1851,
             1.1278: 0.2615, 1.2239: 0.3501, 1.3029: 0.4708, 1.4284: 0.7001, 1.6050: 1.1146, 1.9101: 2.0802,
             2.1425: 2.8689, 2.2603: 3.2270, 2.3176: 3.4000}]
        self.rms_density = [
            {-0.0017: 0.0018, 0.1229: 0.0020, 0.2782: 0.0019, 0.4386: 0.0023, 0.6195: 0.0024, 0.7833: 0.0027,
             0.8840: 0.0033, 1.0273: 0.0040, 1.2235: 0.0050, 1.4352: 0.0070, 1.6109: 0.0090, 1.8362: 0.0114,
             2.0802: 0.0140, 2.2747: 0.0158, 2.4215: 0.0175, 2.5580: 0.0211}]
        self.rms = 14

        self.calibrate()


class Kodak5222Dev4(Kodak5222):
    def __init__(self, *args, **kwargs):
        super().__init__(4, *args, **kwargs)


class Kodak5222Dev5(Kodak5222):
    def __init__(self, *args, **kwargs):
        super().__init__(5, *args, **kwargs)


class Kodak5222Dev6(Kodak5222):
    def __init__(self, *args, **kwargs):
        super().__init__(6, *args, **kwargs)


class Kodak5222Dev9(Kodak5222):
    def __init__(self, *args, **kwargs):
        super().__init__(9, *args, **kwargs)


class Kodak5222Dev12(Kodak5222):
    def __init__(self, *args, **kwargs):
        super().__init__(12, *args, **kwargs)
