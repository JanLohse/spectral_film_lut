from spectral_film_lut.film_spectral import *


class FujiflexOld(FilmSpectral):
    def __init__(self):
        super().__init__()

        self.lad = [0.8, 0.8, 0.8]
        self.density_measure = 'status_a'

        # spectral sensitivity
        red_log_sensitivity = {590.7529: 0.2476, 607.6678: 0.3165, 619.9101: 0.3802, 627.2947: 0.4181, 637.0199: 0.4492,
                               648.1150: 0.4666, 656.1000: 0.4701, 665.0465: 0.5001, 674.7575: 0.5617, 685.8109: 0.6686,
                               692.6882: 0.7496, 699.5683: 0.8248, 705.5884: 0.8645, 709.4777: 0.8785, 713.6717: 0.8660,
                               718.8561: 0.8182}
        red_log_sensitivity_extension = {379.8579: 0.5187, 384.8884: 0.5917, 391.2898: 0.6491, 400.0402: 0.6821,
                                         409.0000: 0.6837, 416.2182: 0.6606, 421.3953: 0.6285, 425.1169: 0.5845,
                                         430.1273: 0.4925, 437.5733: 0.3986, 448.3281: 0.3109, 455.5468: 0.2868,
                                         463.7265: 0.2903, 473.2565: 0.3224, 481.2171: 0.3779, 487.6158: 0.4413,
                                         493.2316: 0.5124, 498.6691: 0.5481, 503.7290: 0.5583, 509.9614: 0.5607,
                                         516.7689: 0.5827, 524.9390: 0.6069, 530.0026: 0.6092, 534.9849: 0.5771,
                                         540.1785: 0.5096, 543.9116: 0.4410, 548.2347: 0.3607, 552.7552: 0.2746,
                                         558.2341: 0.2219, 562.4331: 0.1986}
        red_log_sensitivity = {**red_log_sensitivity_extension, **red_log_sensitivity}
        green_log_sensitivity = {382.4967: 0.2908, 384.9918: 0.3706, 389.4283: 0.4643, 394.2640: 0.5373,
                                 399.3056: 0.5868, 404.9453: 0.6068, 410.7944: 0.5954, 414.4132: 0.5632,
                                 418.9113: 0.5252, 425.6388: 0.5099, 432.8341: 0.5359, 439.0490: 0.5756,
                                 451.9505: 0.6875, 466.3966: 0.8290, 474.5410: 0.9082, 481.7252: 0.9578,
                                 485.7891: 1.0150, 491.2818: 1.1412, 496.0055: 1.2457, 500.6335: 1.3462,
                                 504.1241: 1.3798, 508.6893: 1.4067, 513.0798: 1.3903, 517.5692: 1.3709,
                                 522.4389: 1.3712, 527.6697: 1.4325, 532.7829: 1.5370, 537.2925: 1.6827,
                                 542.8587: 1.8600, 546.1324: 1.9408, 548.6435: 1.9862, 550.1954: 2.0000,
                                 551.6614: 1.9893, 552.9427: 1.9570, 555.1386: 1.8431, 559.1952: 1.4994,
                                 562.1088: 1.1007, 565.2498: 0.8404, 569.7589: 0.5705, 574.9391: 0.3232,
                                 576.7327: 0.2368}
        blue_log_sensitivity = {383.3861: 0.8884, 391.0472: 1.1680, 397.3724: 1.3885, 400.6397: 1.4831,
                                405.0877: 1.5522, 408.9715: 1.5780, 415.2057: 1.5764, 421.0397: 1.5974,
                                432.6613: 1.7387, 451.8049: 2.0407, 463.3912: 2.2577, 467.0508: 2.3463,
                                469.3589: 2.4094, 472.0510: 2.4843, 474.7486: 2.5473, 477.8451: 2.5908,
                                479.3979: 2.6027, 480.7632: 2.5988, 483.0148: 2.5744, 484.7927: 2.5215,
                                486.6767: 2.4498, 488.1758: 2.3684, 490.5312: 2.1219, 493.2150: 1.7978,
                                495.4762: 1.5444, 499.1542: 1.1771, 501.6001: 0.9453, 504.7131: 0.7451,
                                509.3834: 0.5469, 514.9037: 0.4057, 518.4430: 0.3352, 522.9525: 0.2726}
        self.log_sensitivity = [red_log_sensitivity, green_log_sensitivity, blue_log_sensitivity]

        # sensiometry
        red_curve = {0.3452: 0.0297, 0.3601: 0.0281, 0.3742: 0.0292, 0.3877: 0.0329, 0.4059: 0.0392, 0.4183: 0.0462,
                     0.4350: 0.0574, 0.4482: 0.0709, 0.4592: 0.0826, 0.4696: 0.1000, 0.4871: 0.1346, 0.5170: 0.2167,
                     0.5463: 0.3239, 0.5668: 0.4160, 0.5885: 0.5097, 0.5960: 0.5399, 0.6017: 0.5650, 0.6161: 0.6047,
                     0.6279: 0.6284, 0.6438: 0.6552, 0.6605: 0.6746, 0.6750: 0.6894, 0.6913: 0.7006, 0.7105: 0.7091,
                     0.7331: 0.7153, 0.7574: 0.7174}
        green_curve = {0.3452: 0.0291, 0.3684: 0.0281, 0.3921: 0.0343, 0.4081: 0.0408, 0.4328: 0.0563, 0.4581: 0.0815,
                       0.4770: 0.1131, 0.5018: 0.1709, 0.5306: 0.2614, 0.5490: 0.3373, 0.5688: 0.4082, 0.5921: 0.4897,
                       0.6114: 0.5506, 0.6199: 0.5715, 0.6256: 0.5869, 0.6360: 0.6059, 0.6453: 0.6204, 0.6585: 0.6355,
                       0.6771: 0.6529, 0.6958: 0.6641, 0.7140: 0.6720, 0.7322: 0.6755, 0.7446: 0.6764}
        blue_curve = {0.3448: 0.0152, 0.3630: 0.0158, 0.3872: 0.0226, 0.4098: 0.0333, 0.4263: 0.0440, 0.4378: 0.0558,
                      0.4526: 0.0737, 0.4767: 0.1117, 0.5045: 0.1793, 0.5401: 0.2960, 0.5583: 0.3591, 0.5696: 0.4043,
                      0.5761: 0.4333, 0.5854: 0.4618, 0.5984: 0.5020, 0.6061: 0.5199, 0.6159: 0.5461, 0.6246: 0.5651,
                      0.6350: 0.5847, 0.6487: 0.6031, 0.6657: 0.6199, 0.6888: 0.6329, 0.7169: 0.6403, 0.7428: 0.6429}
        red_log_exposure = xp.array(list(red_curve.keys()), dtype=default_dtype) * 4
        red_density_curve = xp.array(list(red_curve.values()), dtype=default_dtype) * 4
        green_log_exposure = xp.array(list(green_curve.keys()), dtype=default_dtype) * 4
        green_density_curve = xp.array(list(green_curve.values()), dtype=default_dtype) * 4
        blue_log_exposure = xp.array(list(blue_curve.keys()), dtype=default_dtype) * 4
        blue_density_curve = xp.array(list(blue_curve.values()), dtype=default_dtype) * 4
        self.log_exposure = [red_log_exposure, green_log_exposure, blue_log_exposure]
        self.density_curve = [red_density_curve, green_density_curve, blue_density_curve]

        # spectral dye density
        red_sd = {381.5340: 1.9250, 384.6084: 1.6649, 391.6230: 1.2967, 394.9097: 1.1512, 402.7927: 0.8911,
                  408.5904: 0.7930, 414.8224: 0.7479, 421.1635: 0.7061, 432.0994: 0.5783, 440.7383: 0.4880,
                  454.4056: 0.3757, 466.5402: 0.3130, 478.7818: 0.2910, 489.1634: 0.3077, 505.4441: 0.3707,
                  529.0427: 0.5165, 549.6881: 0.7053, 574.1515: 1.0253, 593.4788: 1.3353, 610.7312: 1.6177,
                  625.9104: 1.8373, 638.1441: 1.9609, 646.2289: 2.0095, 658.0309: 2.0317, 671.0390: 1.9845,
                  678.3646: 1.9261, 687.8791: 1.8104, 702.8642: 1.5824, 712.7099: 1.4061, 719.9296: 1.2871}
        green_sd = {381.3158: 1.9184, 383.7379: 1.5943, 388.5660: 1.2393, 397.0041: 0.8238, 406.6373: 0.5350,
                    415.4961: 0.4193, 426.7556: 0.3699, 437.1375: 0.3821, 447.1893: 0.4329, 460.2978: 0.5477,
                    474.0584: 0.7287, 488.6880: 1.0067, 504.1851: 1.4104, 515.6455: 1.6851, 526.2370: 1.8605,
                    533.4458: 1.9399, 541.0927: 2.0018, 546.5569: 2.0062, 551.8045: 1.9754, 555.7418: 1.9225,
                    560.5576: 1.7947, 569.0972: 1.5192, 585.0848: 0.9460, 592.0904: 0.7432, 604.7809: 0.5074,
                    611.2339: 0.4182, 621.4030: 0.3224, 630.6959: 0.2630, 650.4806: 0.2036, 671.0292: 0.1642,
                    697.2605: 0.1314, 719.8847: 0.1074}
        blue_sd = {381.2958: 2.2845, 382.6120: 2.1985, 385.4624: 2.0353, 390.5001: 1.8457, 395.0985: 1.6959,
                   399.9126: 1.5967, 403.1922: 1.5813, 407.8908: 1.5957, 412.5882: 1.6343, 419.5763: 1.7513,
                   427.1107: 1.8715, 433.0085: 1.9421, 438.9076: 1.9885, 444.9174: 2.0095, 452.7876: 1.9854,
                   459.1289: 1.9391, 463.7230: 1.8675, 470.3968: 1.7364, 477.9475: 1.5578, 488.0179: 1.2713,
                   501.4793: 0.9264, 512.5300: 0.6983, 525.8748: 0.4889, 539.2154: 0.3568, 554.3014: 0.2820,
                   578.5671: 0.2194, 609.8255: 0.1922, 642.1758: 0.1815, 663.5969: 0.1740, 693.1073: 0.1335,
                   709.7203: 0.1161, 719.9941: 0.1052}
        self.spectral_density = [colour.SpectralDistribution(x) for x in (red_sd, green_sd, blue_sd)]

        self.calibrate()
