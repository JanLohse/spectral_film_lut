from spectral_film_lut.film_spectral import *


class FujiflexNew(FilmSpectral):
    def __init__(self):
        super().__init__()

        self.density_measure = 'status_a'
        self.manufacturer = 'Fujifilm'
        self.stage = 'print'
        self.type = 'negative'
        self.medium = 'photo'
        self.comment = 'Optimized for laser printing.'

        # spectral sensitivity
        red_log_sensitivity = {589.7251: -0.6055, 604.4840: -0.4833, 615.5250: -0.3783, 625.2141: -0.2893,
                               631.8612: -0.2356, 638.2830: -0.2048, 645.6061: -0.1957, 654.6192: -0.1751,
                               662.5056: -0.1306, 669.3781: -0.0564, 676.4759: 0.0429, 685.0383: 0.1765,
                               692.3614: 0.2804, 697.6566: 0.3534, 702.2758: 0.3934, 706.6697: 0.4151, 711.4015: 0.3991,
                               715.6827: 0.3443, 718.7247: 0.2781, 722.2172: 0.1776, 725.0338: 0.0897}
        green_log_sensitivity = {437.4042: -0.1295, 445.6287: -0.0450, 458.5849: 0.1525, 464.1055: 0.2518,
                                 468.0487: 0.3100, 472.4425: 0.3626, 477.9630: 0.4037, 482.4696: 0.4447,
                                 487.4268: 0.5498, 499.0311: 0.8283, 504.5516: 0.9356, 508.3822: 0.9790,
                                 512.6634: 0.9927, 518.7472: 0.9733, 523.9297: 0.9710, 527.7603: 0.9904,
                                 532.2668: 1.0703, 541.1672: 1.3763, 545.2231: 1.5498, 548.4903: 1.6594,
                                 550.2929: 1.6868, 553.6728: 1.6731, 555.9261: 1.6137, 560.9959: 1.1114,
                                 566.1785: 0.4151, 569.6710: 0.0521, 573.7269: -0.2447, 578.6841: -0.4799,
                                 583.9793: -0.6409}
        blue_log_sensitivity = {376.4534: 0.1913, 381.6359: 0.5155, 386.2551: 0.7050, 391.6629: 0.8831,
                                397.7467: 1.0201, 402.9292: 1.1023, 408.3371: 1.1479, 411.4917: 1.1525,
                                414.4209: 1.1342, 418.0261: 1.1137, 421.6314: 1.1080, 425.0113: 1.1365,
                                428.8418: 1.2005, 435.3763: 1.3283, 443.4881: 1.4356, 454.5291: 1.5966,
                                460.1622: 1.7027, 464.6688: 1.8352, 470.5273: 2.0018, 475.3718: 2.1171,
                                478.8644: 2.1708, 480.6670: 2.1776, 483.1456: 2.1525, 486.7508: 2.0155,
                                493.2853: 1.5269, 499.4817: 0.8580, 504.1009: 0.4014, 507.7062: 0.1457,
                                510.7481: 0.0110, 513.9027: -0.1648, 519.6485: -0.3680, 523.4790: -0.4457,
                                527.7603: -0.5027}
        self.log_sensitivity = [red_log_sensitivity, green_log_sensitivity, blue_log_sensitivity]

        # sensiometry
        red_curve = {-0.2523: 0.0989, -0.0881: 0.1029, 0.0221: 0.1119, 0.1222: 0.1320, 0.2083: 0.1670, 0.2744: 0.2171,
                     0.3715: 0.3383, 0.4456: 0.4846, 0.5577: 0.7701, 0.6438: 1.1207, 0.7620: 1.6176, 0.8631: 2.0444,
                     0.9262: 2.2768, 0.9882: 2.4651, 1.0543: 2.5763, 1.1424: 2.6605, 1.2215: 2.7086, 1.3197: 2.7436,
                     1.3998: 2.7577, 1.4879: 2.7617, 1.5379: 2.7617}
        green_curve = {-0.2402: 0.1330, -0.1541: 0.1310, 0.0401: 0.1470, 0.1663: 0.1770, 0.2243: 0.2101, 0.2744: 0.2452,
                       0.3264: 0.2963, 0.3725: 0.3594, 0.4166: 0.4435, 0.5287: 0.7040, 0.6198: 1.0145, 0.7299: 1.4834,
                       0.8000: 1.7979, 0.8281: 1.9282, 0.8861: 2.1846, 0.9222: 2.3369, 0.9542: 2.4311, 0.9872: 2.5052,
                       1.0153: 2.5593, 1.0583: 2.6254, 1.1134: 2.6815, 1.1494: 2.7086, 1.1995: 2.7346, 1.2636: 2.7527,
                       1.3577: 2.7677, 1.4498: 2.7687, 1.5359: 2.7697}
        blue_curve = {-0.2503: 0.0989, -0.1561: 0.0969, -0.0600: 0.1049, 0.0401: 0.1239, 0.1162: 0.1470, 0.1943: 0.1750,
                      0.2524: 0.2121, 0.3264: 0.2872, 0.3885: 0.3794, 0.4546: 0.5096, 0.5217: 0.6679, 0.5888: 0.8663,
                      0.6428: 1.0306, 0.7129: 1.2610, 0.7930: 1.5194, 0.8751: 1.7779, 0.9582: 2.0284, 1.0153: 2.1806,
                      1.0764: 2.2848, 1.1324: 2.3579, 1.2015: 2.4171, 1.2776: 2.4631, 1.3647: 2.4912, 1.4458: 2.5032,
                      1.5319: 2.5122}
        red_log_exposure = xp.array(list(red_curve.keys()), dtype=default_dtype)
        red_density_curve = xp.array(list(red_curve.values()), dtype=default_dtype)
        green_log_exposure = xp.array(list(green_curve.keys()), dtype=default_dtype)
        green_density_curve = xp.array(list(green_curve.values()), dtype=default_dtype)
        blue_log_exposure = xp.array(list(blue_curve.keys()), dtype=default_dtype)
        blue_density_curve = xp.array(list(blue_curve.values()), dtype=default_dtype)
        self.log_exposure = [red_log_exposure, green_log_exposure, blue_log_exposure]
        self.density_curve = [red_density_curve, green_density_curve, blue_density_curve]

        # spectral dye density
        red_sd = {378.1022: 0.0518, 413.7956: 0.0447, 439.8540: 0.0397, 469.1971: 0.0375, 487.1533: 0.0375,
                  503.3577: 0.0413, 516.2774: 0.0513, 526.2409: 0.0667, 535.9854: 0.0899, 545.1825: 0.1235,
                  555.2555: 0.1753, 564.6715: 0.2437, 578.2482: 0.3793, 585.0365: 0.4664, 594.0146: 0.6130,
                  603.3212: 0.7574, 609.6715: 0.8368, 616.4599: 0.9063, 624.2336: 0.9614, 631.8978: 0.9890,
                  639.3431: 0.9961, 647.2263: 0.9884, 651.3869: 0.9791, 655.9854: 0.9504, 661.4599: 0.9085,
                  665.9489: 0.8633, 674.7080: 0.7652, 685.0000: 0.6373, 693.1022: 0.5447, 700.1095: 0.4719,
                  705.8029: 0.4212, 711.1679: 0.3837, 715.7664: 0.3572, 720.1460: 0.3379}
        green_sd = {377.5547: 0.0237, 401.7518: 0.0331, 416.8613: 0.0408, 433.0657: 0.0557, 448.3942: 0.0755,
                    457.5912: 0.1003, 466.3504: 0.1356, 475.9854: 0.1896, 487.2628: 0.2745, 498.1022: 0.3925,
                    508.8321: 0.5502, 517.7007: 0.6913, 525.0365: 0.8026, 532.4818: 0.9019, 536.7518: 0.9454,
                    540.6934: 0.9752, 544.5255: 0.9912, 548.0292: 0.9961, 552.7372: 0.9785, 557.0073: 0.9394,
                    561.2774: 0.8743, 567.1898: 0.7508, 572.7737: 0.6141, 578.9051: 0.4752, 586.7883: 0.3275,
                    592.5912: 0.2431, 599.4891: 0.1665, 605.8394: 0.1158, 614.8175: 0.0717, 625.9854: 0.0458,
                    640.6569: 0.0248, 656.4234: 0.0143, 702.6277: 0.0127}
        blue_sd = {377.4453: 0.0871, 383.3577: 0.1367, 389.9270: 0.2106, 400.8759: 0.3749, 409.4161: 0.5524,
                   415.3285: 0.6902, 421.1314: 0.8026, 425.0730: 0.8644, 429.5620: 0.9162, 434.4891: 0.9587,
                   440.0730: 0.9851, 444.8905: 0.9956, 450.3650: 0.9923, 455.4015: 0.9768, 460.0000: 0.9471,
                   463.9416: 0.9063, 470.8394: 0.8043, 477.7372: 0.6659, 484.5255: 0.5160, 490.9854: 0.3826,
                   496.0219: 0.2982, 505.3285: 0.1797, 512.3358: 0.1169, 525.2555: 0.0595, 535.9854: 0.0375,
                   554.8175: 0.0232, 593.5766: 0.0187, 647.6642: 0.0160}
        self.spectral_density = [colour.SpectralDistribution(x) for x in (red_sd, green_sd, blue_sd)]

        self.calibrate()
