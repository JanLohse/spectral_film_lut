from spectral_film_lut.film_spectral import *


class KodakPortraEndura(FilmSpectral):
    def __init__(self):
        super().__init__()

        self.lad = [0.8, 0.8, 0.8]
        self.density_measure = 'status_a'

        # spectral sensitivity
        red_log_sensitivity = {494.2737: -1.4187, 500.1397: -1.3608, 504.7486: -1.2962, 511.4525: -1.2517,
                               516.8994: -1.2383, 522.7654: -1.2517, 530.3073: -1.2160, 534.0782: -1.1893,
                               539.1061: -1.1114, 542.8771: -1.0557, 546.6480: -1.0512, 550.2095: -1.1114,
                               552.9330: -1.2116, 557.1229: -1.3341, 560.0559: -1.3987, 564.6648: -1.4187,
                               569.6927: -1.4521, 573.8827: -1.4143, 581.0056: -1.4053, 591.8994: -1.3408,
                               600.9078: -1.2873, 611.5922: -1.1782, 621.2291: -1.0624, 629.6089: -0.9688,
                               636.3128: -0.9220, 641.7598: -0.9131, 648.4637: -0.9265, 656.0056: -0.9332,
                               666.2709: -0.8597, 674.4413: -0.7461, 683.0307: -0.5679, 689.7346: -0.3808,
                               696.6480: -0.2339, 702.9330: -0.1670, 708.7989: -0.2027, 710.8939: -0.2695,
                               716.3408: -0.4254, 719.4832: -0.5546, 722.6257: -0.7194, 728.9106: -1.0757,
                               732.6816: -1.2762, 734.9860: -1.3987, 737.0810: -1.5256, 738.5475: -1.6058}
        green_log_sensitivity = {389.3156: -0.0200, 391.8296: -0.2561, 393.9246: -0.4209, 395.3911: -0.4588,
                                 400.4190: -0.4499, 405.8659: -0.4744, 410.0559: -0.5278, 413.1983: -0.6281,
                                 418.0168: -0.7038, 424.9302: -0.6949, 433.1006: -0.6080, 447.3464: -0.3898,
                                 455.9358: -0.2361, 463.4777: -0.1158, 473.3240: -0.0045, 479.8184: 0.1381,
                                 486.7318: 0.2962, 493.4358: 0.3920, 498.0447: 0.4833, 501.6061: 0.5167,
                                 505.1676: 0.5323, 511.4525: 0.5100, 516.0615: 0.4833, 519.8324: 0.4699,
                                 524.6508: 0.5033, 530.9358: 0.6147, 534.7067: 0.6815, 538.6872: 0.8129,
                                 543.2961: 0.9555, 546.4385: 1.0601, 548.5335: 1.1136, 552.7235: 1.0891,
                                 556.4944: 0.7283, 560.0559: 0.2472, 562.7793: -0.2428, 566.9693: -0.7372,
                                 572.6257: -1.1114, 577.8631: -1.4321, 583.9385: -1.7416}
        blue_log_sensitivity = {379.2598: -0.0512, 386.8017: 0.2539, 393.7151: 0.4477, 397.2765: 0.5568,
                                402.0950: 0.6837, 406.0754: 0.7261, 409.6369: 0.7149, 413.1983: 0.6793,
                                419.9022: 0.6993, 425.1397: 0.7906, 432.6816: 0.9198, 437.0810: 1.0022,
                                441.8994: 1.0668, 447.9749: 1.1203, 453.6313: 1.2316, 459.0782: 1.3742,
                                463.0587: 1.5011, 466.8296: 1.6080, 469.3436: 1.6726, 472.9050: 1.7149,
                                476.4665: 1.6682, 479.6089: 1.5212, 481.2849: 1.3719, 485.4749: 0.9911,
                                487.7793: 0.6526, 492.5978: 0.1626, 498.6732: -0.4744, 502.4441: -0.8931,
                                506.0056: -1.2316, 509.1480: -1.4878}
        self.log_sensitivity = [red_log_sensitivity, green_log_sensitivity, blue_log_sensitivity]

        # sensiometry
        red_curve = {-3.0000: 0.0888, -2.3878: 0.0952, -2.2468: 0.1081, -2.1715: 0.1243, -2.0929: 0.1469,
                     -2.0160: 0.1791, -1.9455: 0.2259, -1.8734: 0.2953, -1.7981: 0.3873, -1.7308: 0.4922,
                     -1.6346: 0.7101, -1.5385: 0.9699, -1.4423: 1.2604, -1.3333: 1.6154, -1.2548: 1.8687,
                     -1.2212: 1.9672, -1.1731: 2.0931, -1.1170: 2.2028, -1.0673: 2.2835, -1.0128: 2.3609,
                     -0.9391: 2.4287, -0.8365: 2.4965, -0.7372: 2.5352, -0.6090: 2.5724, -0.4840: 2.6046,
                     -0.3718: 2.6240, -0.3045: 2.6321, -0.1603: 2.6563}
        green_curve = {-2.9904: 0.0920, -2.2949: 0.1033, -2.0481: 0.1662, -1.8910: 0.2808, -1.7676: 0.4325,
                       -1.6907: 0.5713, -1.5801: 0.8327, -1.4599: 1.1813, -1.3702: 1.4798, -1.2853: 1.7283,
                       -1.2019: 1.9527, -1.1026: 2.1544, -1.0288: 2.2609, -0.9006: 2.3916, -0.7853: 2.4691,
                       -0.6635: 2.5239, -0.5449: 2.5756, -0.4519: 2.6095, -0.3269: 2.6272, -0.1587: 2.6595}
        blue_curve = {-2.9936: 0.0904, -2.3942: 0.0968, -2.2051: 0.1162, -2.0769: 0.1549, -1.9135: 0.2517,
                      -1.8189: 0.3421, -1.7372: 0.4615, -1.6074: 0.7327, -1.5353: 0.9279, -1.4343: 1.2426,
                      -1.3702: 1.4588, -1.2532: 1.8203, -1.2163: 1.9188, -1.1635: 2.0446, -1.1042: 2.1560,
                      -1.0385: 2.2464, -0.9647: 2.3045, -0.9167: 2.3303, -0.8622: 2.3513, -0.7644: 2.3739,
                      -0.6058: 2.3932, -0.4423: 2.4077, -0.3077: 2.4142, -0.1635: 2.4223}
        red_log_exposure = xp.array(list(red_curve.keys()), dtype=default_dtype)
        red_density_curve = xp.array(list(red_curve.values()), dtype=default_dtype)
        green_log_exposure = xp.array(list(green_curve.keys()), dtype=default_dtype)
        green_density_curve = xp.array(list(green_curve.values()), dtype=default_dtype)
        blue_log_exposure = xp.array(list(blue_curve.keys()), dtype=default_dtype)
        blue_density_curve = xp.array(list(blue_curve.values()), dtype=default_dtype)
        self.log_exposure = [red_log_exposure, green_log_exposure, blue_log_exposure]
        self.density_curve = [red_density_curve, green_density_curve, blue_density_curve]

        # spectral dye density
        red_sd = {400.2987: 0.1155, 408.3624: 0.1081, 419.7113: 0.0932, 431.3589: 0.0708, 444.2011: 0.0472,
                  455.5500: 0.0373, 472.5734: 0.0311, 494.9726: 0.0385, 514.9826: 0.0584, 535.5898: 0.1031,
                  549.0294: 0.1516, 559.3330: 0.2149, 572.9219: 0.3242, 586.2120: 0.4795, 599.9502: 0.6683,
                  607.4166: 0.7776, 613.8377: 0.8720, 621.1548: 0.9565, 625.7840: 0.9888, 630.1145: 1.0012,
                  635.9383: 0.9925, 640.7168: 0.9652, 645.6446: 0.9118, 651.4684: 0.8360, 657.7402: 0.7416,
                  665.5052: 0.6298, 674.0169: 0.5217, 682.3793: 0.4211, 687.9044: 0.3652, 695.0722: 0.3081,
                  699.8507: 0.2720}
        green_sd = {400.2987: 0.0422, 415.8288: 0.0484, 429.8656: 0.0484, 445.0971: 0.0596, 460.0299: 0.1006,
                    470.9308: 0.1565, 479.5918: 0.2186, 489.7461: 0.3180, 499.6018: 0.4447, 507.3668: 0.5615,
                    514.6839: 0.6696, 520.3584: 0.7466, 527.8248: 0.8410, 533.3499: 0.9068, 539.3230: 0.9615,
                    544.5495: 0.9913, 549.0294: 1.0000, 553.9572: 0.9764, 559.1837: 0.9193, 564.7088: 0.8186,
                    570.2339: 0.6944, 575.0124: 0.5801, 580.8362: 0.4509, 586.8094: 0.3416, 593.5291: 0.2373,
                    602.9368: 0.1466, 615.6297: 0.0770, 627.8746: 0.0484, 640.4181: 0.0385, 655.9482: 0.0360,
                    675.0622: 0.0298, 691.7870: 0.0236, 700.4480: 0.0211}
        blue_sd = {400.2987: 0.4087, 406.7198: 0.5391, 410.9009: 0.6261, 414.6341: 0.7093, 420.4579: 0.8199,
                   425.6844: 0.8957, 430.7616: 0.9416, 436.1374: 0.9739, 440.9159: 0.9901, 446.5903: 1.0000,
                   452.5635: 0.9913, 457.6406: 0.9727, 463.1658: 0.9267, 467.9443: 0.8720, 473.4694: 0.7863,
                   481.2344: 0.6571, 488.4022: 0.5342, 493.9273: 0.4373, 503.1857: 0.2957, 510.5027: 0.2099,
                   517.6705: 0.1453, 526.6302: 0.0907, 540.0697: 0.0447, 558.2877: 0.0186, 574.7138: 0.0124,
                   590.8412: 0.0075, 606.0727: 0.0037, 641.3141: 0.0037, 668.7904: 0.0099, 678.6461: 0.0112,
                   695.9681: 0.0087, 699.5520: 0.0112}
        self.spectral_density = [colour.SpectralDistribution(x) for x in (red_sd, green_sd, blue_sd)]

        self.calibrate()
