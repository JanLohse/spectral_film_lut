from spectral_film_lut.film_spectral import *


class KodakDuraflexPlus(FilmSpectral):
    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)

        self.lad = [0.8, 0.8, 0.8]
        self.density_measure = 'status_a'
        self.exposure_kelvin = None
        self.projection_kelvin = 6500

        # spectral sensitivity
        red_log_sensitivity = {500.7862: -1.5181, 507.3375: -1.4346, 514.6751: -1.3873, 519.9161: -1.3873,
                               526.7296: -1.4179, 533.8050: -1.4513, 542.7149: -1.4652, 549.2662: -1.4596,
                               555.6866: -1.4276, 563.1551: -1.3678, 569.9686: -1.3428, 576.5199: -1.3511,
                               580.7128: -1.3511, 587.7883: -1.3150, 594.4706: -1.2635, 601.8082: -1.2190,
                               613.2075: -1.1008, 623.6897: -0.9756, 631.0273: -0.8977, 637.9717: -0.8532,
                               645.4403: -0.8420, 653.8260: -0.8462, 663.3910: -0.8100, 673.3491: -0.6918,
                               684.2243: -0.4776, 691.0377: -0.2940, 694.7065: -0.1827, 698.2442: -0.1201,
                               701.7820: -0.1034, 706.8920: -0.1340, 712.2642: -0.2356, 717.7673: -0.4192,
                               728.6426: -0.9617, 740.9591: -1.6293}
        green_log_sensitivity = {401.2055: -0.4498, 407.2327: -0.4804, 411.6876: -0.5332, 415.3564: -0.5944,
                                 418.2390: -0.6584, 420.0734: -0.6946, 423.2180: -0.7029, 427.2799: -0.6710,
                                 435.9277: -0.5680, 447.3270: -0.3886, 456.6300: -0.2370, 466.8501: -0.0867,
                                 476.8082: 0.0607, 488.0765: 0.3083, 494.7589: 0.4599, 499.4759: 0.5434,
                                 505.5031: 0.5823, 514.9371: 0.5990, 523.3229: 0.6296, 528.0398: 0.6797,
                                 534.8532: 0.7993, 540.0943: 0.9468, 543.5010: 1.0692, 546.1216: 1.1665,
                                 548.2180: 1.2222, 549.6593: 1.2389, 551.6247: 1.1916, 553.9832: -0.0659,
                                 557.7830: -0.3691, 567.4790: -0.7169, 572.8512: -0.9116, 576.2579: -1.0729,
                                 578.6164: -1.2287, 580.8438: -1.4694}
        blue_log_sensitivity = {380.8962: 0.0482, 386.1373: 0.3236, 390.8543: 0.5156, 396.0954: 0.6644,
                                400.9434: 0.7492, 404.8742: 0.7937, 408.8050: 0.8104, 414.3082: 0.7965,
                                418.5010: 0.7854, 423.4801: 0.8021, 426.6247: 0.8494, 432.1279: 0.9746,
                                440.1205: 1.1012, 449.4235: 1.2249, 455.4507: 1.3223, 459.9057: 1.4308,
                                464.0985: 1.6089, 465.6709: 1.6756, 467.7673: 1.7299, 471.1740: 1.7521,
                                477.2013: 1.7118, 481.5252: 1.6186, 484.4078: 1.4962, 487.2904: 1.2249,
                                492.5314: 0.4293, 500.5241: -0.3941, 506.1583: -0.8838, 509.5650: -1.1870,
                                510.8753: -1.3011}
        self.log_sensitivity = [red_log_sensitivity, green_log_sensitivity, blue_log_sensitivity]

        # sensiometry
        red_curve = {-2.9999: 0.1035, -2.3049: 0.1061, -2.0482: 0.1103, -1.9528: 0.1222, -1.8461: 0.1444,
                     -1.7621: 0.1835, -1.7189: 0.2073, -1.6826: 0.2362, -1.6190: 0.2940, -1.5713: 0.3569,
                     -1.5281: 0.4131, -1.4963: 0.4743, -1.4623: 0.5253, -1.4236: 0.5984, -1.3669: 0.7362,
                     -1.3487: 0.7864, -1.2522: 1.0491, -1.1602: 1.3586, -1.1011: 1.5542, -1.0489: 1.7226,
                     -0.9830: 1.9216, -0.9489: 2.0202, -0.9194: 2.0882, -0.8717: 2.1784, -0.8286: 2.2498,
                     -0.7922: 2.2991, -0.7627: 2.3399, -0.7241: 2.3773, -0.6900: 2.4080, -0.6332: 2.4505,
                     -0.5787: 2.4828, -0.5197: 2.5066, -0.4493: 2.5270, -0.3834: 2.5423, -0.2948: 2.5559,
                     -0.2267: 2.5678, -0.1540: 2.5814}
        green_curve = {-2.9988: 0.1052, -2.8659: 0.1095, -2.3253: 0.1086, -2.0959: 0.1103, -1.9846: 0.1188,
                       -1.8665: 0.1410, -1.8166: 0.1605, -1.7643: 0.1860, -1.7053: 0.2243, -1.6337: 0.2932,
                       -1.5611: 0.3816, -1.5077: 0.4658, -1.4725: 0.5296, -1.4373: 0.6001, -1.3987: 0.6835,
                       -1.3589: 0.7745, -1.3260: 0.8637, -1.2669: 1.0338, -1.1920: 1.2736, -1.1329: 1.4743,
                       -1.0534: 1.7328, -0.9944: 1.9148, -0.9319: 2.0840, -0.8785: 2.1903, -0.8456: 2.2523,
                       -0.8047: 2.3127, -0.7786: 2.3467, -0.7388: 2.3901, -0.6991: 2.4267, -0.6514: 2.4607,
                       -0.5992: 2.4930, -0.5481: 2.5143, -0.4720: 2.5398, -0.3947: 2.5517, -0.3005: 2.5653,
                       -0.1540: 2.5848}
        blue_curve = {-2.8625: 0.0993, -2.2686: 0.1001, -2.0392: 0.1052, -1.9199: 0.1129, -1.8450: 0.1282,
                      -1.7916: 0.1427, -1.7393: 0.1682, -1.6735: 0.2107, -1.6122: 0.2617, -1.5656: 0.3178,
                      -1.5145: 0.3893, -1.4520: 0.4981, -1.4123: 0.5780, -1.3589: 0.7158, -1.2987: 0.8893,
                      -1.2340: 1.0916, -1.1658: 1.3161, -1.0932: 1.5593, -1.0080: 1.8161, -0.9376: 1.9896,
                      -0.8899: 2.0831, -0.8490: 2.1478, -0.8013: 2.2039, -0.7547: 2.2489, -0.7082: 2.2804,
                      -0.6446: 2.3110, -0.5821: 2.3323, -0.5242: 2.3467, -0.4583: 2.3569, -0.3834: 2.3637,
                      -0.3016: 2.3688, -0.2255: 2.3773, -0.1517: 2.3850}
        red_log_exposure = xp.array(list(red_curve.keys()), dtype=default_dtype)
        red_density_curve = xp.array(list(red_curve.values()), dtype=default_dtype)
        green_log_exposure = xp.array(list(green_curve.keys()), dtype=default_dtype)
        green_density_curve = xp.array(list(green_curve.values()), dtype=default_dtype)
        blue_log_exposure = xp.array(list(blue_curve.keys()), dtype=default_dtype)
        blue_density_curve = xp.array(list(blue_curve.values()), dtype=default_dtype)
        self.log_exposure = [red_log_exposure, green_log_exposure, blue_log_exposure]
        self.density_curve = [red_density_curve, green_density_curve, blue_density_curve]

        self.exposure_base = 10

        # spectral dye density
        red_sd = {399.7571: 1.1988, 405.8300: 1.0229, 411.4170: 0.8470, 417.7328: 0.6651, 421.0121: 0.5863,
                  427.4494: 0.4761, 436.5587: 0.3689, 443.8462: 0.2941, 449.7976: 0.2466, 455.6275: 0.2082,
                  463.4008: 0.1860, 472.8745: 0.1728, 482.1053: 0.1708, 493.0364: 0.1860, 503.4818: 0.2173,
                  512.9555: 0.2497, 520.9717: 0.2941, 529.2308: 0.3477, 543.5628: 0.4528, 553.5223: 0.5337,
                  563.2389: 0.6105, 570.1619: 0.6641, 580.7287: 0.7621, 591.2955: 0.8561, 600.8907: 0.9542,
                  611.7004: 1.0644, 621.4170: 1.1493, 629.0688: 1.2109, 635.0202: 1.2483, 639.8785: 1.2695,
                  646.3158: 1.2837, 653.2389: 1.2847, 662.2267: 1.2645, 671.4575: 1.2241, 682.2672: 1.1664,
                  691.1336: 1.1068, 699.7571: 1.0451}
        green_sd = {400.0000: 0.8673, 403.0364: 0.7278, 407.4089: 0.5398, 410.8097: 0.4104, 413.9676: 0.3224,
                    417.3684: 0.2689, 420.8907: 0.2385, 425.5061: 0.2183, 430.6073: 0.2123, 437.4089: 0.2244,
                    443.3603: 0.2497, 448.8259: 0.2810, 455.8704: 0.3235, 460.4858: 0.3598, 468.9879: 0.4549,
                    476.5182: 0.5539, 484.1700: 0.6560, 494.0081: 0.7965, 505.1822: 0.9602, 513.6842: 1.0815,
                    521.3360: 1.1715, 527.5304: 1.2412, 531.9028: 1.2817, 536.0324: 1.3170, 541.1336: 1.3433,
                    545.7490: 1.3484, 552.4291: 1.3261, 557.0445: 1.2887, 563.2389: 1.2190, 568.5830: 1.1280,
                    576.1134: 0.9663, 583.0364: 0.8056, 589.8381: 0.6742, 596.8826: 0.5549, 605.5061: 0.4367,
                    614.3725: 0.3467, 627.9757: 0.2537, 642.0648: 0.1910, 656.8826: 0.1506, 670.8502: 0.1253,
                    684.9393: 0.1132, 694.8988: 0.1112, 699.5142: 0.1092}
        blue_sd = {400.4858: 1.3726, 409.7166: 1.3504, 415.3036: 1.3464, 420.1619: 1.3555, 425.7490: 1.3716,
                   431.3360: 1.3858, 436.6802: 1.3898, 443.7247: 1.3767, 449.7976: 1.3524, 454.5344: 1.3211,
                   459.7571: 1.2594, 470.2024: 1.0755, 477.9757: 0.9239, 485.8704: 0.7894, 494.2510: 0.6509,
                   500.5668: 0.5438, 506.7611: 0.4478, 515.0202: 0.3548, 525.8300: 0.2709, 539.1903: 0.2072,
                   553.7652: 0.1759, 571.7409: 0.1648, 595.5466: 0.1546, 624.4534: 0.1395, 658.2186: 0.1233,
                   699.5142: 0.1071}
        self.spectral_density = [colour.SpectralDistribution(x) for x in (red_sd, green_sd, blue_sd)]

        self.calibrate()
