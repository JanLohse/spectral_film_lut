from spectral_film_lut.film_spectral import *


class Kodak2303(FilmSpectral):
    def __init__(self, dev_time=5):
        super().__init__()

        self.lad = [1.0, ]
        self.density_measure = 'bw'
        self.manufacturer = 'Kodak'
        self.stage = 'print'
        self.type = 'negative'
        self.medium = 'cine'

        # spectral sensitivity
        self.log_sensitivity = [
            {360.0806: 0.6957, 364.5161: 0.6640, 370.1613: 0.6047, 373.7903: 0.5534, 376.6129: 0.5099, 379.4355: 0.4111,
             383.4677: 0.2925, 385.7863: 0.1897, 388.9113: -0.0474, 392.7419: -0.3715, 395.8669: -0.6601,
             398.1855: -0.8735, 400.0000: -1.1107}, ]

        # sensiometry - characteristic curve
        curve = {2: {-0.3189: -0.0011, 0.0804: 0.0185, 0.3612: 0.0712, 0.5602: 0.1411, 0.7273: 0.2354, 0.8936: 0.3659,
                     1.0469: 0.5228, 1.2035: 0.7121, 1.3360: 0.8953, 1.4767: 1.0957, 1.6542: 1.3433, 1.7700: 1.5320,
                     1.9100: 1.7268, 2.0466: 1.9100},
                 3: {-0.2115: -0.0005, 0.1248: 0.0479, 0.3321: 0.1110, 0.5338: 0.2103, 0.6219: 0.2752, 0.6933: 0.3390,
                     0.8597: 0.5289, 1.0247: 0.7538, 1.2112: 1.0608, 1.3755: 1.3537, 1.5093: 1.5816, 1.6070: 1.7373,
                     1.7450: 2.0026, 1.8199: 2.1074, 1.9655: 2.3028, 2.0535: 2.4119},
                 5: {-0.9429: 0.0075, -0.6968: 0.0032, -0.3959: 0.0075, -0.1629: 0.0142, -0.0146: 0.0424,
                     0.1629: 0.0816, 0.3210: 0.1441, 0.4451: 0.2183, 0.5671: 0.3237, 0.7065: 0.4744, 0.8645: 0.7109,
                     1.0157: 0.9793, 1.1370: 1.2152, 1.2736: 1.4848, 1.3866: 1.7146, 1.5218: 1.9566, 1.6188: 2.1043,
                     1.7145: 2.2826, 1.8476: 2.4897, 1.9509: 2.6221, 2.0542: 2.7434},
                 7: {-0.9429: 0.0081, -0.5234: 0.0112, -0.2413: 0.0283, -0.0943: 0.0418, 0.0222: 0.0638, 0.2011: 0.1306,
                     0.3785: 0.2446, 0.5165: 0.3788, 0.6253: 0.5154, 0.7488: 0.7127, 0.8902: 0.9903, 1.1231: 1.5081,
                     1.2646: 1.8169, 1.3866: 2.0822, 1.5031: 2.3071, 1.6916: 2.6337, 1.8310: 2.8353, 1.9260: 2.9321,
                     1.9828: 2.9891},
                 9: {-0.9325: 0.0050, -0.6101: 0.0075, -0.3328: 0.0203, -0.0451: 0.0694, 0.1525: 0.1337, 0.2607: 0.2005,
                     0.3411: 0.2703, 0.4742: 0.4192, 0.5768: 0.5718, 0.6947: 0.7850, 0.7883: 0.9793, 0.8978: 1.2336,
                     1.0240: 1.5338, 1.2278: 2.0240, 1.3727: 2.3549, 1.4940: 2.5724, 1.6223: 2.7563, 1.7055: 2.9064,
                     1.7575: 2.9860}}
        curve = curve[dev_time]
        self.log_exposure = [xp.array(list(curve.keys()), dtype=default_dtype)]
        self.density_curve = [xp.array(list(curve.values()), dtype=default_dtype)]

        self.rms_curve = [
            {-0.0046: 0.0624, 0.3563: 0.0684, 0.6135: 0.0805, 0.7653: 0.0865, 0.8861: 0.1147, 1.0194: 0.1851,
             1.1278: 0.2615, 1.2239: 0.3501, 1.3029: 0.4708, 1.4284: 0.7001, 1.6050: 1.1146, 1.9101: 2.0802,
             2.1425: 2.8689, 2.2603: 3.2270, 2.3176: 3.4000}]
        self.rms_density = [
            {-0.0017: 0.0018, 0.1229: 0.0020, 0.2782: 0.0019, 0.4386: 0.0023, 0.6195: 0.0024, 0.7833: 0.0027,
             0.8840: 0.0033, 1.0273: 0.0040, 1.2235: 0.0050, 1.4352: 0.0070, 1.6109: 0.0090, 1.8362: 0.0114,
             2.0802: 0.0140, 2.2747: 0.0158, 2.4215: 0.0175, 2.5580: 0.0211}]

        self.calibrate()


class Kodak2303Dev2(Kodak2303):
    def __init__(self, *args, **kwargs):
        super().__init__(2, *args, **kwargs)


class Kodak2303Dev3(Kodak2303):
    def __init__(self, *args, **kwargs):
        super().__init__(3, *args, **kwargs)


class Kodak2303Dev5(Kodak2303):
    def __init__(self, *args, **kwargs):
        super().__init__(5, *args, **kwargs)


class Kodak2303Dev7(Kodak2303):
    def __init__(self, *args, **kwargs):
        super().__init__(7, *args, **kwargs)


class Kodak2303Dev9(Kodak2303):
    def __init__(self, *args, **kwargs):
        super().__init__(9, *args, **kwargs)
