from spectral_film_lut.negative_film.kodak_5248 import *


class Kodak5247(FilmSpectral):
    def __init__(self):
        super().__init__()

        self.iso = 16
        self.density_measure = 'status_m'
        self.exposure_kelvin = 3200
        self.year = 1950
        self.manufacturer = 'Kodak'
        self.stage = 'camera'
        self.type = 'negative'
        self.medium = 'cine'

        # spectral sensitivity
        red_log_sensitivity = {585.2083: 0.6438, 598.0150: 1.0564, 614.1450: 1.5816, 620.1764: 1.7566, 625.6690: 1.8659,
                               632.3663: 1.9409, 638.3092: 1.9720, 642.4869: 2.0107, 645.7696: 2.0750, 647.9819: 2.1158,
                               651.9298: 2.1415, 656.1539: 2.0974, 664.1854: 1.8470, 670.0089: 1.6084}
        green_log_sensitivity = {493.7973: 1.3787, 502.0131: 1.5838, 508.8382: 1.7929, 514.1517: 1.9799,
                                 518.6949: 2.0914, 524.0412: 2.1597, 530.3220: 2.1922, 539.9681: 2.2024,
                                 546.2446: 2.1823, 550.8762: 2.1364, 558.2054: 1.9907, 567.3362: 1.7125,
                                 576.0673: 1.3621, 582.6091: 0.9904, 586.6851: 0.7279, 589.4758: 0.4623}
        blue_log_sensitivity = {400.6963: 2.9515, 404.1591: 3.1174, 408.6587: 3.2461, 414.5456: 3.3167,
                                420.8155: 3.3083, 427.6576: 3.1858, 432.1265: 3.0677, 437.6149: 3.0037,
                                443.0099: 2.9853, 450.7815: 3.0167, 457.7157: 3.0316, 463.5052: 2.9742,
                                467.6693: 2.8560, 472.1829: 2.5982, 477.6267: 2.2520, 483.3543: 1.9431,
                                491.9172: 1.6508, 500.2742: 1.4238, 505.2799: 1.2545, 508.2920: 1.0169}
        self.log_sensitivity = [red_log_sensitivity, green_log_sensitivity, blue_log_sensitivity]

        # sensiometry - characteristic curve
        red_curve = {0.0783: 0.1050, 0.1548: 0.1057, 0.2314: 0.1102, 0.3080: 0.1114, 0.3845: 0.1136, 0.4611: 0.1181,
                     0.5376: 0.1230, 0.6142: 0.1294, 0.6908: 0.1369, 0.7673: 0.1467, 0.8439: 0.1570, 0.9204: 0.1706,
                     0.9970: 0.1876, 1.0735: 0.2080, 1.1501: 0.2353, 1.2266: 0.2659, 1.3032: 0.3014, 1.3797: 0.3405,
                     1.4563: 0.3830, 1.5328: 0.4276, 1.6094: 0.4743, 1.6859: 0.5250, 1.7624: 0.5766, 1.8390: 0.6278,
                     1.9155: 0.6764, 1.9921: 0.7258, 2.0686: 0.7747, 2.1451: 0.8229, 2.2217: 0.8693, 2.2982: 0.9145,
                     2.3748: 0.9594, 2.4513: 1.0040, 2.5279: 1.0474, 2.6044: 1.0896, 2.6809: 1.1302, 2.7575: 1.1694,
                     2.8340: 1.2064, 2.9001: 1.2386, }
        green_curve = {0.0572: 0.5173, 0.1338: 0.5118, 0.2103: 0.5146, 0.2869: 0.5185, 0.3635: 0.5267, 0.4400: 0.5367,
                       0.5166: 0.5510, 0.5931: 0.5671, 0.6697: 0.5874, 0.7462: 0.6108, 0.8228: 0.6369, 0.8993: 0.6666,
                       0.9759: 0.6981, 1.0524: 0.7312, 1.1290: 0.7728, 1.2055: 0.8231, 1.2820: 0.8768, 1.3586: 0.9348,
                       1.4351: 0.9924, 1.5117: 1.0495, 1.5882: 1.1062, 1.6647: 1.1614, 1.7413: 1.2151, 1.8178: 1.2682,
                       1.8943: 1.3201, 1.9709: 1.3710, 2.0474: 1.4214, 2.1240: 1.4721, 2.2005: 1.5185, 2.2771: 1.5655,
                       2.3536: 1.6098, 2.4301: 1.6523, 2.5067: 1.6929, 2.5832: 1.7311, 2.6598: 1.7666, 2.7363: 1.8018,
                       2.8129: 1.8346, 2.8859: 1.8628, }
        blue_curve = {0.0709: 0.9307, 0.1475: 0.9256, 0.2241: 0.9280, 0.3006: 0.9326, 0.3772: 0.9405, 0.4537: 0.9499,
                      0.5303: 0.9647, 0.6069: 0.9836, 0.6834: 1.0045, 0.7600: 1.0297, 0.8365: 1.0600, 0.9131: 1.0955,
                      0.9896: 1.1362, 1.0661: 1.1795, 1.1427: 1.2248, 1.2192: 1.2724, 1.2958: 1.3224, 1.3723: 1.3755,
                      1.4488: 1.4323, 1.5254: 1.4896, 1.6019: 1.5475, 1.6785: 1.6064, 1.7550: 1.6656, 1.8315: 1.7268,
                      1.9046: 1.7859, 1.9776: 1.8448, 2.0542: 1.9040, 2.1307: 1.9638, 2.2072: 2.0229, 2.2838: 2.0812,
                      2.3603: 2.1385, 2.4369: 2.1943, 2.5134: 2.2501, 2.5899: 2.3069, 2.6665: 2.3633, 2.7430: 2.4209,
                      2.8195: 2.4792, 2.8891: 2.5330,

                      }
        d_scale, log_H_scale, log_H_offset = 1, 1, 2.25
        red_log_exposure = xp.array(list(red_curve.keys()), dtype=default_dtype) * log_H_scale - log_H_offset
        red_density_curve = xp.array(list(red_curve.values()), dtype=default_dtype) * d_scale
        green_log_exposure = xp.array(list(green_curve.keys()), dtype=default_dtype) * log_H_scale - log_H_offset
        green_density_curve = xp.array(list(green_curve.values()), dtype=default_dtype) * d_scale
        blue_log_exposure = xp.array(list(blue_curve.keys()), dtype=default_dtype) * log_H_scale - log_H_offset
        blue_density_curve = xp.array(list(blue_curve.values()), dtype=default_dtype) * d_scale
        self.log_exposure = [red_log_exposure, green_log_exposure, blue_log_exposure]
        self.density_curve = [red_density_curve, green_density_curve, blue_density_curve]

        # spectral dye density
        minimum_sd = {411.5902: 2.1231, 420.7097: 2.0329, 425.4743: 1.9401, 429.8094: 1.8382, 433.7136: 1.7337,
                      437.1868: 1.6276, 440.6593: 1.5244, 444.1314: 1.4234, 447.6028: 1.3260, 451.0735: 1.2316,
                      454.9772: 1.1297, 459.3114: 1.0319, 464.0770: 0.9344, 469.7061: 0.8338, 477.0597: 0.7378,
                      488.2935: 0.6540, 502.1081: 0.6071, 515.9184: 0.5805, 529.7295: 0.5501, 543.5481: 0.4840,
                      557.3715: 0.3939, 571.1954: 0.3018, 585.0163: 0.2244, 598.8310: 0.1766, 612.6396: 0.1584,
                      626.4457: 0.1525, 640.2507: 0.1517, 654.0548: 0.1553, 667.8586: 0.1601, 681.6622: 0.1662,
                      694.1715: 0.1726, 401.0024: 2.0985}
        midscale_sd = {410.6865: 2.5210, 418.8603: 2.6311, 426.1731: 2.7326, 434.7806: 2.8323, 446.4156: 2.8940,
                       457.2056: 2.8702, 462.8357: 2.7644, 466.7391: 2.6637, 471.9355: 2.5691, 478.8590: 2.4670,
                       488.8010: 2.3716, 501.7593: 2.2932, 515.5802: 2.2152, 527.6784: 2.1239, 535.8937: 2.0337,
                       541.0913: 1.9332, 545.4268: 1.8290, 549.7617: 1.7282, 554.0963: 1.6287, 558.4300: 1.5332,
                       562.7628: 1.4424, 567.0959: 1.3505, 571.4284: 1.2609, 576.1936: 1.1653, 583.1171: 1.0635,
                       594.3515: 0.9767, 608.1632: 0.9433, 621.9592: 0.9864, 635.7472: 1.0675, 649.5356: 1.1471,
                       663.3253: 1.2202, 677.1174: 1.2817, 689.6210: 1.3159}
        red_sd = {400.6922: 0.5710, 411.6419: 0.4790, 423.9328: 0.3999, 429.4632: 0.3738, 443.9285: 0.3001,
                  465.1336: 0.2273, 481.7752: 0.2093, 491.1276: 0.2042, 500.4796: 0.2021, 506.0055: 0.2018,
                  529.4290: 0.2306, 550.6672: 0.2991, 560.6250: 0.3505, 569.3068: 0.4005, 578.2225: 0.4625,
                  586.2876: 0.5280, 593.5027: 0.5925, 599.8679: 0.6554, 605.8076: 0.7208, 611.3221: 0.7868,
                  616.4112: 0.8549, 621.5002: 0.9240, 626.5891: 0.9931, 631.6780: 1.0622, 636.7675: 1.1280,
                  641.8573: 1.1923, 647.3719: 1.2580, 653.3115: 1.3238, 659.2518: 1.3859, 666.4665: 1.4524,
                  675.3838: 1.5061, 684.7305: 1.5341, 692.3817: 1.5343, 698.7064: 1.5052}
        green_sd = {400.5641: 1.5036, 407.4982: 1.5558, 416.8045: 1.5675, 424.0155: 1.5080, 428.6891: 1.4430,
                    432.5165: 1.3778, 436.0975: 1.2860, 441.0301: 1.2035, 443.5836: 1.1533, 449.1341: 0.9822,
                    452.9664: 0.9000, 455.9514: 0.8210, 462.7698: 0.6556, 470.7398: 0.6054, 479.7043: 0.6285,
                    487.3016: 0.6968, 492.7833: 0.7643, 497.4187: 0.8317, 501.6319: 0.8955, 506.2686: 0.9584,
                    512.1743: 1.0231, 520.1953: 1.0895, 529.4910: 1.1380, 538.8014: 1.1356, 546.0110: 1.0809,
                    550.6834: 1.0201, 554.9341: 0.9542, 558.7617: 0.8881, 562.1657: 0.8235, 565.5721: 0.7504,
                    568.9784: 0.6779, 572.8078: 0.6054, 577.0585: 0.5394, 581.7317: 0.4758, 587.2516: 0.4111,
                    594.0411: 0.3458, 602.5224: 0.2836, 611.8479: 0.2287, 621.1684: 0.1913, 630.4855: 0.1657,
                    639.8014: 0.1439, 648.6932: 0.1258, 664.7387: 0.1019, 682.1343: 0.0880, 691.4450: 0.0848}
        blue_sd = {408.6531: 0.8508, 415.4797: 0.9156, 421.8820: 0.9815, 428.2845: 1.0478, 436.3847: 1.1104,
                   445.7498: 1.1523, 455.0951: 1.1504, 463.5708: 1.1044, 469.9135: 1.0391, 474.5539: 0.9670,
                   478.7703: 0.8968, 482.9861: 0.8255, 487.2038: 0.7582, 491.4226: 0.6932, 495.6437: 0.6335,
                   500.2874: 0.5687, 505.3550: 0.5019, 510.8490: 0.4387, 517.1917: 0.3734, 524.3846: 0.3092,
                   532.8527: 0.2465, 542.1746: 0.1932, 551.5029: 0.1539, 558.8564: 0.1314, 597.3499: 0.0784,
                   606.6962: 0.0789, 616.0424: 0.0788, 625.3883: 0.0782, 634.7339: 0.0771, 644.0795: 0.0757,
                   653.4256: 0.0757, 662.7718: 0.0756, 672.1179: 0.0755, 681.4640: 0.0755, 690.8102: 0.0754,
                   696.3322: 0.0739}
        self.spectral_density = [colour.SpectralDistribution(x) for x in (red_sd, green_sd, blue_sd)]
        self.d_ref_sd = colour.SpectralDistribution(midscale_sd)
        self.d_min_sd = colour.SpectralDistribution(minimum_sd)

        self.mtf = [{2.5169: 1.1185, 3.5699: 1.0780, 6.3431: 1.0585, 10.1089: 1.0052, 14.5014: 0.9616, 18.7989: 0.8929,
                     22.3525: 0.8321, 26.0857: 0.7612, 31.8541: 0.6611, 38.2475: 0.5699, 45.2434: 0.4823,
                     57.4047: 0.3610, 65.7731: 0.3032, 77.9868: 0.2330}]

        # copied from kodak exr 5248
        red_rms = {0.0081: 0.0074, 0.5625: 0.0078, 1.2141: 0.0083, 1.4852: 0.0084, 1.9061: 0.0075, 2.2541: 0.0065,
                   2.7357: 0.0054, 3.1364: 0.0047, 3.6301: 0.0044, 4.0753: 0.0044, 4.5326: 0.0044, 4.9939: 0.0044}
        green_rms = {409.1269: 1.0521, 418.4373: 1.0635, 427.7658: 1.0253, 435.8318: 0.9665, 442.2060: 0.9026,
                     447.7336: 0.8385, 452.8372: 0.7759, 455.8149: 0.7378, 463.9998: 0.6350, 474.4912: 0.6091,
                     482.5205: 0.6501, 488.4252: 0.7121, 493.0612: 0.7700, 497.2723: 0.8321, 501.4828: 0.8958,
                     506.1171: 0.9586, 512.0208: 1.0232, 520.0409: 1.0894, 529.3376: 1.1379, 538.6532: 1.1352,
                     545.8700: 1.0827, 550.5503: 1.0201, 554.8083: 0.9542, 558.6430: 0.8882, 562.0538: 0.8237,
                     565.4677: 0.7507, 568.8816: 0.6776, 572.7185: 0.6058, 576.9765: 0.5399, 581.6569: 0.4768,
                     587.1849: 0.4117, 593.9830: 0.3466, 602.4737: 0.2841, 611.8083: 0.2293, 621.1365: 0.1922,
                     630.4605: 0.1663, 639.7829: 0.1448, 649.1041: 0.1267, 654.1864: 0.1222, 681.2954: 0.0891,
                     690.6111: 0.0858, 696.1153: 0.0857}
        blue_rms = {0.0202: 0.0111, 0.3399: 0.0091, 0.5868: 0.0094, 0.7770: 0.0113, 1.0279: 0.0157, 1.2546: 0.0190,
                    1.5217: 0.0201, 1.8495: 0.0180, 2.1327: 0.0153, 2.4605: 0.0134, 2.7398: 0.0130, 3.0231: 0.0129,
                    3.2821: 0.0122, 3.5208: 0.0115, 3.9417: 0.0113, 4.5892: 0.0112, 4.9960: 0.0112}
        red_rms_density = {0.0182: 0.2203, 0.4518: 0.2284, 0.7840: 0.2382, 0.9542: 0.2495, 1.1933: 0.2835,
                           1.5904: 0.3791, 2.4048: 0.6221, 3.4704: 0.9332, 4.1917: 1.1373, 5.0041: 1.3625}
        green_rms_density = {0.0122: 0.6237, 0.5166: 0.6189, 0.9988: 0.6529, 1.4972: 0.7647, 2.0199: 0.9883,
                             3.5069: 1.5326, 4.0174: 1.7173, 4.4854: 1.8566, 5.0020: 2.0608}
        blue_rms_density = {0.0162: 1.0239, 0.6179: 1.0304, 0.9947: 1.0595, 1.3169: 1.1260, 1.7545: 1.2847,
                            2.7087: 1.6671, 3.6244: 2.0381, 4.4246: 2.3248, 5.0000: 2.5095}
        self.rms_curve = [red_rms, green_rms, blue_rms]
        self.rms_density = [red_rms_density, green_rms_density, blue_rms_density]
        # guessed
        self.rms = 5

        self.calibrate()


if __name__ == "__main__":
    Kodak5247().plot_data(Kodak5248())
